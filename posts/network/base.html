<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><meta name="title" content="Nodejs 网络 &amp; HTTP" data-next-head=""/><meta name="author" content="Favori" data-next-head=""/><link rel="icon" type="image/png" sizes="70x70" href="/favicon-70x70.png" data-next-head=""/><title data-next-head="">Nodejs 网络 &amp; HTTP</title><style data-next-head="">:root{--nextra-bg:250,250,250;}.dark{--nextra-bg:17,17,17;}</style><link rel="preload" href="/_next/static/css/552cfd626c7d3395.css" as="style"/><link rel="stylesheet" href="/_next/static/css/552cfd626c7d3395.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-7aa77703737d139f.js" defer=""></script><script src="/_next/static/chunks/framework-4e48f2cc6a39465a.js" defer=""></script><script src="/_next/static/chunks/main-d7c2d8830adc2477.js" defer=""></script><script src="/_next/static/chunks/pages/_app-b735a2408b00229b.js" defer=""></script><script src="/_next/static/chunks/2195-a5c3dde35c1c11c2.js" defer=""></script><script src="/_next/static/chunks/pages/posts/network/base-b7cb7f1801c7d960.js" defer=""></script><script src="/_next/static/rsL7KsAc9Qt_1PtcEy7yH/_buildManifest.js" defer=""></script><script src="/_next/static/rsL7KsAc9Qt_1PtcEy7yH/_ssgManifest.js" defer=""></script></head><body><div id="__next"><script>((e,t,r,n,o,a,i,s)=>{let l=document.documentElement,u=["light","dark"];function c(t){(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,n=r&&a?o.map(e=>a[e]||e):o;r?(l.classList.remove(...n),l.classList.add(t)):l.setAttribute(e,t)}),s&&u.includes(t)&&(l.style.colorScheme=t)}if(n)c(n);else try{let e=localStorage.getItem(t)||r,n=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(n)}catch(e){}})("class","theme","system",null,["light","dark"],null,true,true)</script><div class="Layout_container__o59WT"><header class="Header_header__aO32P"><div class="Header_headerInner__np1cA"><div class="Header_search__c61pn"></div><div class="Header_rightNav__NG1Lv"><button class="Header_themeButton__zM4Kv" aria-label="Toggle theme"><svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><a href="https://github.com/yuanguandong" target="_blank" rel="noopener noreferrer" class="Header_navLink__Kg8GB"><svg height="20" viewBox="0 0 16 16" width="20" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg><span class="hidden md:inline ml-1">GitHub</span></a></div></div></header><main class="Layout_main__5FFfL"><article class="_container _prose max-md:_prose-sm dark:_prose-invert" dir="ltr"><h1>Nodejs 网络 &amp; HTTP</h1><div class="_mb-8 _flex _gap-3 _items-center"><div class="_not-prose _grow dark:_text-gray-400 _text-gray-600"><div class="_flex _flex-wrap _items-center _gap-1">Favori<!-- -->,<time dateTime="2020-08-14T00:00:00.000Z">Fri Aug 14 2020</time></div></div><div class="_flex _items-center _gap-3 print:_hidden"></div></div><p><img alt="Base" loading="lazy" width="1082" height="820" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 320 240&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/webp;base64,UklGRkgAAABXRUJQVlA4IDwAAACwAQCdASoIAAYAAkA4JZQCdAD0klH4AP76DH8Jq8h4xhxj3medvbbmZZVY3+l5UzGdj65K2TvSmPKQAAA=&#x27;/%3E%3C/svg%3E&quot;)" src="/_next/static/media/hero.7c2b5b9d.webp"/></p>
<div class="img-desc">图：Kashish Arora</div>
<h2 id="tcpip网络协议" class="subheading-h2">TCP/IP网络协议<a href="#tcpip网络协议" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p>传输控制协议（TCP，Transmission Control Protocol）是一种面向连接的、可靠的、基于字节流的传输层通信协议</p>
<p>IP是Internet Protocol（网际互连协议）的缩写，是TCP/IP体系中的网际层协议。</p>
<p>是⼀一个协议家族, 以TCP、IP协议为核⼼心, 包含HTTP、SMTP、TELNET等各种协议。</p>
<h2 id="osi七层模型" class="subheading-h2">OSI七层模型<a href="#osi七层模型" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p>OSI（开放系统互联(Open System Interconnection)）一般指开放式系统互联</p>
<p>开放式系统互联是把网络通信的工作分为7层,分别是物理层,数据链路层,网络层,传输层,会话层,表示层和应用层。</p>
<p>第七层： 应用层 为操作系统或者网络应用程序提供访问网络服务的接口。 （html）</p>
<p>第六层： 表示层 压缩，格式转换</p>
<p>第五层： 会话层 负责数据传输中维持网络设备之间的通信链接</p>
<p>第四层： 传输层 把传输表头加到数据上形成数据包，完成端到端的数据传输。协议：TCP UDP</p>
<p>第三层： 网络层 负责对子网间的数据包进行寻址和路由选择,可以实现拥塞控制、网际互联等功能。协议：IP; (路由器)</p>
<p>第二层： 数据链路层 物理地址寻址 （交换机/猫）</p>
<p>第一层： 物理层 在局域网上进行数据传输，负责电脑通信设备与网络媒体之间的互通 (网线网卡……)</p>
<p><img loading="lazy" width="1033" height="400" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 320 120&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAABlBMVEX29vbu7u4m5kP6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAFElEQVR4nGNghAAGEIBQjGAGIwMAAOoADmdbRywAAAAASUVORK5CYII=&#x27;/%3E%3C/svg%3E&quot;)" src="/_next/static/media/1.a95eee0e.png"/></p>
<h2 id="数据包" class="subheading-h2">数据包<a href="#数据包" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p>数据包是⽹网络层及以上分层中包的单位</p>
<p>每个分层都会对发送的数据添加一个首部, 首部包含了该层协议相关的信息, 而真正要发送的内容称之为数据.</p>
<p>也就是说每一个数据包都由首部 + 数据组成.</p>
<p>而对于下层来说, 上层发送过来的全部内容, 都会当做本层的数据, 举个例子：</p>
<p>传输层 TCP包：TCP包首部 + 数据
网络层 IP包：IP包首部 + (TCP包首部 + 数据)
数据链路层 以太网包：以太网包首部 + (IP包首部 + (TCP包首部 + 数据))</p>
<h2 id="每层在接收到数据后除了添加首部-还要做什么呢" class="subheading-h2">每层在接收到数据后除了添加首部, 还要做什么呢?<a href="#每层在接收到数据后除了添加首部-还要做什么呢" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p>用户1</p>
<ul>
<li>传输层：TCP模块为保证数据的可靠传输, 需要添加TCP首部</li>
<li>网络层：IP包生成后，参考路由控制表决定接受此 IP 包的路由或主机。</li>
<li>数据链路层：生成的以太网数据包将通过物理层传输给接收端</li>
</ul>
<p>用户2</p>
<ul>
<li>数据链路层：主机收到以太网包后，首先从以太网包首部找到 MAC 地址判断是否为发送给自己的包，若不是则丢弃数据。
如果是发送给自己的包，则从以太网包首部中的类型确定数据类型，再传给相应的模块，比如IP.</li>
<li>网络层：从包首部中判断此 IP 地址是否与自己的 IP 地址匹配，如果匹配则根据首部的协议类型将数据发送给对应的模块，比如TCP</li>
<li>传输层：在 TCP 模块中，首先会计算一下校验和，判断数据是否被破坏。然后检查是否在按照顺序接收数据。最后检查端口号，确定具体的应用程序。数据被完整地接收以后，会传给由端口号识别的应用程序。</li>
</ul>
<p>总结一下几个地址：</p>
<ul>
<li>数据链路层的是MAC地址, 用来识别同一链路中的不同计算机</li>
<li>网络层的是IP地址, 用来识别TCP/IP 网络中互连的主机和路由器</li>
<li>传输层的是端口号(程序地址), 用来识别同一台计算机中进行通信的不同应用程序</li>
</ul>
<h2 id="通过以下这几个数据综合来识别一次通信" class="subheading-h2">通过以下这几个数据综合来识别一次通信：<a href="#通过以下这几个数据综合来识别一次通信" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<ul>
<li>IP首部：源IP地址</li>
<li>IP首部：目标IP地址</li>
<li>协议号, TCP或者UDP</li>
<li>TCP首部：源端口号</li>
<li>TCP首部：目标端口号</li>
</ul>
<h2 id="tcpudp的区别" class="subheading-h2">TCP/UDP的区别<a href="#tcpudp的区别" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p>用户数据报协议（UDP，User Datagram Protocol）</p>
<ul>
<li>UDP是无连接的，TCP必须三次握手建立连接</li>
<li>UDP是面向报文，没有拥塞控制，所以速度快，适合多媒体通信要求，比如及时聊天，支持一对一，一队多。多对一，多对多。</li>
<li>TCP只能是一对一的可靠性传输</li>
</ul>
<p>那么咱们的直播底层是什么协议呢?</p>
<p>其实现在常见的rtmp和hls直播, 都是基于TCP的, 希望能提供稳定的直播环境.</p>
<h2 id="tcp通过什么方式提供可靠性" class="subheading-h2">TCP通过什么方式提供可靠性？<a href="#tcp通过什么方式提供可靠性" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<ul>
<li>超时重发，发出报文段要是没有收到及时的确认，会重发。</li>
<li>数据包的校验，也就是校验首部数据和。</li>
<li>对失序的数据重新排序</li>
<li>进行流量控制，防止缓冲区溢出</li>
<li>快重传和快恢复</li>
<li>TCP会将数据截断为合理的长度</li>
</ul>
<h2 id="tcp如何控制拥塞" class="subheading-h2">TCP如何控制拥塞？<a href="#tcp如何控制拥塞" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p>拥塞控制就是防止过多的数据注入网络中，这样可以使网络中的路由器或链路不致过载。</p>
<p>发送方维持一个叫做拥塞窗口cwnd（congestion window）的状态变量。</p>
<p>为了防止cwnd增长过大引起网络拥塞，还需设置一个慢开始门限ssthresh状态变量。ssthresh的用法如下：</p>
<div class="nextra-code _relative [&amp;:not(:first-child)]:_mt-6"><pre class="nextra-focus _overflow-x-auto _subpixel-antialiased _text-[.9em] _bg-white dark:_bg-black _py-4 _ring-1 _ring-inset _ring-gray-300 dark:_ring-neutral-700 contrast-more:_ring-gray-900 contrast-more:dark:_ring-gray-50 contrast-more:_contrast-150 _rounded-md _not-prose" tabindex="0"><code class="nextra-code" dir="ltr"><span><span>当cwnd&lt;ssthresh时，使用慢开始算法。也就是乘法算法</span></span>
<span><span></span></span>
<span><span>当cwnd&gt;ssthresh时，改用拥塞避免算法。也就是加法算法</span></span>
<span><span></span></span>
<span><span>当cwnd=ssthresh时，慢开始与拥塞避免算法任意。</span></span></code></pre><div class="_opacity-0 _transition [div:hover&gt;&amp;]:_opacity-100 focus-within:_opacity-100 _flex _gap-1 _absolute _right-4 _top-2"><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5 md:_hidden" title="Toggle word wrap" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="currentColor" height="16"><path d="M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"></path></svg></button><button class="_transition _border _border-gray-300 dark:_border-neutral-700 contrast-more:_border-gray-900 contrast-more:dark:_border-gray-50 _rounded-md _p-1.5" title="Copy code" type="button" data-headlessui-state=""><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" height="16" class="nextra-copy-icon"><rect x="9" y="9" width="13" height="13" rx="2"></rect><path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5"></path></svg></button></div></div>
<p>当出现拥塞的时候就把心的门限值设为此时窗口大小的一般，窗口大小设置为1，再重新执行上面的步骤。
当收到连续三个重传的时候这就需要快重传和快恢复了，当收到连续三个重传 这个时候发送方就要重传自己的信息，然后门限减半但是这个时候并不是网络阻塞，窗口只会减半执行拥塞避免算法。</p>
<h2 id="tcp协议的一次数据传输-从建立连接到断开连接都有哪些流程" class="subheading-h2">TCP协议的一次数据传输, 从建立连接到断开连接都有哪些流程?<a href="#tcp协议的一次数据传输-从建立连接到断开连接都有哪些流程" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p><img loading="lazy" width="656" height="732" decoding="async" data-nimg="1" style="color:transparent;background-size:cover;background-position:50% 50%;background-repeat:no-repeat;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 280 320&#x27;%3E%3Cfilter id=&#x27;b&#x27; color-interpolation-filters=&#x27;sRGB&#x27;%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3CfeColorMatrix values=&#x27;1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1&#x27; result=&#x27;s&#x27;/%3E%3CfeFlood x=&#x27;0&#x27; y=&#x27;0&#x27; width=&#x27;100%25&#x27; height=&#x27;100%25&#x27;/%3E%3CfeComposite operator=&#x27;out&#x27; in=&#x27;s&#x27;/%3E%3CfeComposite in2=&#x27;SourceGraphic&#x27;/%3E%3CfeGaussianBlur stdDeviation=&#x27;20&#x27;/%3E%3C/filter%3E%3Cimage width=&#x27;100%25&#x27; height=&#x27;100%25&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; preserveAspectRatio=&#x27;none&#x27; style=&#x27;filter: url(%23b);&#x27; href=&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAASFBMVEXZ5r7D0ue5zOHz4tTa4crR2ufmzLXw1Lvs0Lj4+fTk5uHt3M/f5s3L1+HX4O7o2MvU28TO2rbg59Dt7uni5/T76dvd4uXx2sUjw3JWAAAACXBIWXMAABcSAAAXEgFnn9JSAAAAOklEQVR4nCXBtwHAMAwDMKrYolxT/381QwBky8x24/DLhw+c+M0iqnOhLFEpD6KSZKAyyErs3s3s/QA2twGvM2AbKAAAAABJRU5ErkJggg==&#x27;/%3E%3C/svg%3E&quot;)" src="/_next/static/media/3.89385157.png"/></p>
<p>第一次握手：建立连接。客户端发送连接请求报文段，将SYN位置为1，Sequence Number为x；然后，客户端进入SYN_SEND状态，等待服务器的确认；</p>
<p>第二次握手：服务器收到客户端的SYN报文段，需要对这个SYN报文段进行确认，
设置Acknowledgment Number为x+1(Sequence Number+1)；同时，自己自己还要发送SYN请求信息，
将SYN位置为1，Sequence Number为y；服务器端将上述所有信息放到一个报文段（即SYN+ACK报文段）中，
一并发送给客户端，此时服务器进入SYN_RECV状态；</p>
<p>第三次握手：客户端收到服务器的SYN+ACK报文段。然后将Acknowledgment Number设置为y+1，
向服务器发送ACK报文段，这个报文段发送完毕以后，客户端和服务器端都进入ESTABLISHED状态，
完成TCP三次握手。</p>
<p>完成了三次握手，客户端和服务器端就可以开始传送数据。以上就是TCP三次握手的总体介绍。通信结束客户端和服务端就断开连接，需要经过四次分手确认。</p>
<p>第一次分手：主机1（可以使客户端，也可以是服务器端），设置Sequence Number和Acknowledgment Number，向主机2发送一个FIN报文段；
此时，主机1进入FIN_WAIT_1状态；这表示主机1没有数据要发送给主机2了；</p>
<p>第二次分手：主机2收到了主机1发送的FIN报文段，向主机1回一个ACK报文段，Acknowledgment Number为Sequence Number加1；
主机1进入FIN_WAIT_2状态；主机2告诉主机1，我“同意”你的关闭请求；</p>
<p>第三次分手：主机2向主机1发送FIN报文段，请求关闭连接，同时主机2进入LAST_ACK状态；</p>
<p>第四次分手：主机1收到主机2发送的FIN报文段，向主机2发送ACK报文段，然后主机1进入TIME_WAIT状态；</p>
<p>主机2收到主机1的ACK报文段以后，就关闭连接；
此时，主机1等待2MSL后依然没有收到回复，则证明Server端已正常关闭，那好，主机1也可以关闭连接了。</p>
<h2 id="ip地址" class="subheading-h2">IP地址<a href="#ip地址" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p>IP 地址（IPv4 地址）由32位正整数来表示，在计算机内部以二进制方式被处理。日常生活中，我们将32位的 IP 地址以每8位为一组，分成4组，每组以 “.” 隔开，再将每组数转换成十进制数</p>
<p>IP地址包含网络标识和主机标识, 比如152.112.110.16</p>
<p>152.112.110就是网络标识, 同一网段内网络标识必须相同
16就是主机标识, 同一网段内主机标识不能重复</p>
<h2 id="ipv6" class="subheading-h2">IPv6<a href="#ipv6" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p>IPv6（IP version 6）是为了根本解决 IPv4 地址耗尽的问题而被标准化的网际协议。IPv4 的地址长度为 4 个 8 位字节，即 32 比特。而 IPv6 的地址长度则是原来的 4 倍，即 128 比特，一般写成 8 个 16 位字节。</p>
<h2 id="dns" class="subheading-h2">DNS<a href="#dns" class="_not-prose subheading-anchor" aria-label="Permalink for this section"></a></h2>
<p>我们平时访问一个网站, 一个应用程序, 并不是用ip来访问的, 而是用一个域名. 那么域名是怎么和ip地址建立联系的呢?</p>
<p>就是通过dns, Domain Name System. 比如wiki上的一个例子</p>
<p>以访问 zh.wikipedia.org 为例：</p>
<p>客户端发送查询报文”query zh.wikipedia.org”至DNS服务器，DNS服务器首先检查自身缓存，如果存在记录则直接返回结果。
如果记录老化或不存在，则：
DNS服务器向根域名服务器发送查询报文”query zh.wikipedia.org”，根域名服务器返回顶级域 .org 的顶级域名服务器地址。
DNS服务器向 .org 域的顶级域名服务器发送查询报文”query zh.wikipedia.org”，得到二级域 .wikipedia.org 的权威域名服务器地址。
DNS服务器向 .wikipedia.org 域的权威域名服务器发送查询报文”query zh.wikipedia.org”，得到主机 zh 的A记录，存入自身缓存并返回给客户端。</p></article></main><footer class="Footer_footer__hibhg"><div class="Footer_footerInner___6PzH"><div class="Footer_footerContent__7ET_v"><div class="Footer_footerLeft__6YSJc"><div class="Footer_footerMotto__hGlND"><p class="Footer_mottoContent__DZtOp"></p><p class="Footer_mottoAuthor__CLOkJ">—— </p></div></div><div class="Footer_footerRight__gZmlM"><div class="Footer_footerLinks__nX7_m"><a href="https://github.com/yuanguandong" class="Footer_footerLink__PHLXX">GitHub</a></div><div class="Footer_footerCopyright__v5EO_">© <!-- -->2024<!-- --> 重剑的博客 All rights reserved.</div><div class="Footer_footerICP__U9ArL"><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener noreferrer" class="Footer_footerLink__PHLXX">蜀ICP备2024070350号-3</a></div></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/posts/network/base","query":{},"buildId":"rsL7KsAc9Qt_1PtcEy7yH","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>